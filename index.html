<!DOCTYPE html>
<html lang="en" dir="ltr">
  <head>
    <meta charset="utf-8">
    <title>Web Calculator</title>
  </head>
  <link rel="stylesheet" type="text/css" href="style.css"/>  
  <body>
    <h1>The Web Calculator</h1>
    <div id="calculator">
      <table>
        <tr>
          <td colspan="6"><input type="text" id="result_field" disabled></td>
        </tr>
        <tr>
          <td><button id="1">1</button></td>
          <td><button id="2">2</button></td>
          <td class="separator"><button id="3">3</button></td>
          <td><button id="clear">C</button></td>          
          <td><button id="delete">&larr;</button></td>  
          <td><button id="right_par">(</button></td>  
        </tr>
        <tr>
          <td><button id="4">4</button></td>
          <td><button id="5">5</button></td>
          <td class="separator"><button id="6">6</button></td>
          <td><button id="times">*</button></td>
          <td><button id="divide">/</button></td>
          <td><button id="left_par">)</button></td>  
        </tr>
        <tr>
          <td><button id="7">7</button></td>          
          <td><button id="8">8</button></td>          
          <td class="separator"><button id="9">9</button></td>          
          <td><button id="plus">+</button></td>
          <td><button id="minus">-</button></td>          
          <td rowspan="2"><button id="equal">=</button></td>          
        </tr>
        <tr>
          <td><button id="negate">+-</button></td>          
          <td><button id="0">0</button></td>          
          <td class="separator"><button id="dot">.</button></td>          
          <td><button id="power">^</button></td>          
          <td><button id="power2">^2</button></td>          
        </tr>
      </table>
    </div>
    <i>- Created by Matias Storm</i>
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="calculator.js"></script>
    <script>
      c = new Calculator($("#result_field"));
      c.clear();
      numbers = ["1", "2", "3", "4", "5", "6", "7", "8", "9", "0"];
      
      numbers.forEach(val =>{
        $("#" + val).click(function(){
          this.blur();
          c.typeNum(val);
      })})
      
      $("#negate").click(function()   {this.blur(); c.negate()});
      $("#dot").click(function()      {this.blur(); c.typeOperator(".")});
      $("#plus").click(function()     {this.blur(); c.typeOperator("+")});
      $("#minus").click(function()    {this.blur(); c.typeOperator("-")});
      $("#times").click(function()    {this.blur(); c.typeOperator("*")});
      $("#divide").click(function()   {this.blur(); c.typeOperator("/")});
      $("#power").click(function()    {this.blur(); c.typeOperator("^")});
      $("#power2").click(function()   {this.blur(); c.typeOperator("^2")});
      $("#right_par").click(function(){this.blur(); c.typeOperator("(")});
      $("#left_par").click(function() {this.blur(); c.typeOperator(")")});
      $("#equal").click(function()    {this.blur(); c.evalualte()});
      $("#clear").click(function()    {this.blur(); c.clear()});
      $("#delete").click(function()   {this.blur(); c.delete()});
      
      $("body").keyup(function(event){
        event.preventDefault();
        event.stopPropagation();
        var dict = {46: "dot",    110: "#dot",   49:  "#1",     97:  "#1",
                    48: "#0" ,    96:  "#0",     49:  "#1",     97:  "#1",
                    50: "#2" ,    98:  "#2",     51:  "#3",     99:  "#3",
                    52: "#4" ,    100: "#4",     53:  "#5",     101: "#5",
                    54: "#6" ,    102: "#6",     55:  "#7",     103: "#7",
                    56: "#8" ,    104: "#8",     57:  "#9",     105: "#9",
                    58: "#4" ,    106: "#4",     59:  "#5",     107: "#5",
                    60: "#4" ,    108: "#4",     61:  "#5",     109: "#5",
                    13: "#equal", 106: "#times", 109: "#minus", 107: "#plus",
                    67: "#clear", 80:  "#power", 78:  "#negate"}
        $(dict[event.which]).trigger("click");
      })
      
    </script>
  </body>
  
</html>